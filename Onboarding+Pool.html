<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Galactly — Live Leads &lt;30s</title><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Montserrat:wght@700;800&display=swap" rel="stylesheet"/>
<style>:root{--ink:#fff;--mut:#b9bfd4;--bg:#000;--panel:#0b0c13;--panel2:#090a10;--stroke:rgba(255,255,255,.10);--good:#86f7d6;--accent:#57a4ff;--warn:#ffc857;--hot:#ff7a7a;--ok:#a7ffae;--mont:Montserrat,Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;--inter:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif}*{box-sizing:border-box}html,body{height:100%}body{margin:0;background:var(--bg);color:var(--ink);font-family:var(--inter);line-height:1.55;overflow-x:hidden}header{position:sticky;top:0;z-index:40;background:rgba(0,0,0,.65);backdrop-filter:blur(10px) saturate(1.02);border-bottom:1px solid var(--stroke)}.nav{max-width:1240px;margin:auto;padding:12px 20px;display:flex;align-items:center;gap:14px}.brand{display:flex;align-items:center;gap:10px;color:#fff;text-decoration:none}.brand svg{width:26px;height:26px;filter:drop-shadow(0 0 10px rgba(255,255,255,.12))}.brand b{font:800 16px var(--mont)}.ticker-btn{padding:8px 12px;border:1px solid var(--stroke);border-radius:12px;background:rgba(255,255,255,.06);font:800 11px var(--mont);cursor:pointer}.ticker-btn:hover{background:rgba(255,255,255,.12)}.badge-live{margin-left:auto;display:flex;align-items:center;gap:12px}.pulse{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;background:linear-gradient(90deg,#0d1320,#0f1424);border:1px solid var(--stroke)}.dot{width:8px;height:8px;border-radius:50%;background:var(--hot);box-shadow:0 0 14px rgba(255,100,100,.9);animation:pulse 1.8s infinite}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.25)}100%{transform:scale(1)}}@media (prefers-reduced-motion:reduce){.dot{animation:none}}
.main{max-width:1240px;margin:28px auto;padding:0 20px;display:grid;grid-template-columns:1.2fr .8fr;gap:18px}@media(max-width:1000px){.main{grid-template-columns:1fr}}.panel{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--stroke);border-radius:18px;padding:20px}.h2{font:800 20px var(--mont);margin:0 0 10px}.controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin:8px 0 14px}.pill{padding:8px 12px;border:1px solid var(--stroke);border-radius:999px;font:700 12px var(--mont);cursor:pointer}.pill.active{background:#fff;color:#0a0b10}.right{display:flex;gap:10px;margin-left:auto}.input{background:#0f1118;border:1px solid var(--stroke);color:#fff;border-radius:12px;padding:10px 12px}.range{width:160px}.list{position:relative;height:600px;overflow:auto;scrollbar-width:none}.list::-webkit-scrollbar{width:0;height:0}.card{position:relative;border:1px solid var(--stroke);border-radius:16px;padding:22px 22px 20px;margin-bottom:28px;background:linear-gradient(180deg,#0f1118,#0b0e13);transition:transform .15s ease,box-shadow .15s ease}.card:hover{transform:translateY(-1px);box-shadow:0 6px 22px rgba(0,0,0,.25)}.row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.title{font:800 16px var(--mont)}.meta{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0 14px}.meta .tag{padding:4px 8px;border:1px solid var(--stroke);border-radius:999px;font:700 11px var(--mont);opacity:.98;position:relative}.hot{background:rgba(255,122,122,.12);border-color:rgba(255,122,122,.35)}.good{background:rgba(134,247,214,.12);border-color:rgba(134,247,214,.35)}.warn{background:rgba(255,200,87,.12);border-color:rgba(255,200,87,.35)}.dim{opacity:.8}.ghost{filter:blur(3px);opacity:.6;user-select:none}.reason{opacity:.92;font-size:12px;margin-top:-2px}.split{display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin-top:16px;justify-content:flex-start}.leftBits{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.kpi{padding:6px 8px;border-radius:10px;background:rgba(255,255,255,.06);border:1px solid var(--stroke);font:800 12px var(--mont)}.kpi b{font:800 13px var(--mont)}.fit{display:flex;align-items:center;gap:6px}.fit .bar{width:78px;height:6px;border-radius:999px;background:rgba(255,255,255,.08);position:relative;overflow:hidden}.fit .bar span{position:absolute;left:0;top:0;height:100%;border-radius:999px;background:linear-gradient(90deg,var(--good),var(--accent))}.badges{display:flex;gap:8px;flex-wrap:wrap}.badge{padding:6px 9px;border:1px dashed rgba(255,255,255,.18);border-radius:999px;font:800 11px var(--mont);opacity:.98}.badge.fp{border-style:solid;font-size:12px}.actions-bottom{display:flex;align-items:center;gap:10px;margin-top:18px}.hold{position:relative;display:inline-flex;align-items:center;gap:8px;background:#fff;color:#0a0b10;border:1px solid var(--stroke);border-radius:12px;padding:12px 16px;font:800 12px var(--mont);cursor:pointer;user-select:none;overflow:hidden}.hold .fill{position:absolute;inset:0;left:0;top:0;width:0%;background:linear-gradient(90deg,rgba(134,247,214,.4),rgba(87,164,255,.5));pointer-events:none}.hold[disabled]{opacity:.5;cursor:not-allowed}
.stack{display:grid;gap:12px}.box{border:1px solid var(--stroke);border-radius:16px;padding:14px;background:linear-gradient(180deg,#0f1118,#0c0f14)}.box h3{font:800 14px var(--mont);margin:0 0 8px;display:flex;align-items:center;gap:6px}.rowX{display:flex;align-items:center;justify-content:space-between;gap:8px;margin:6px 0}.switch{display:inline-flex;align-items:center;gap:6px}.switch input{accent-color:#fff}.multipliers{display:flex;gap:6px;flex-wrap:wrap}.mul{padding:5px 8px;border-radius:999px;border:1px solid var(--stroke);font:800 10px var(--mont)}.ok{background:rgba(134,247,214,.12)}.on{background:rgba(87,164,255,.12)}.bill{background:rgba(255,200,87,.12)}.alert{padding:10px;border:1px dashed rgba(255,255,255,.2);border-radius:10px;font-size:12px}.cta{display:flex;gap:8px;flex-wrap:wrap}.ft .row{justify-content:space-between}.ft .hint{opacity:.85;font-size:12px}.ft textarea{width:100%;min-height:80px;background:#0f1118;border:1px solid var(--stroke);border-radius:12px;color:#fff;padding:8px}.ft .input{width:100%}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.7);backdrop-filter:blur(6px);z-index:60}.panel{background:linear-gradient(180deg,var(--panel),var(--panel2));border:1px solid var(--stroke);border-radius:18px;max-width:720px;width:92%;padding:16px}.panel h3{font:800 16px var(--mont);margin:0 0 8px}.close{float:right;cursor:pointer;opacity:.8}.hr{height:1px;background:var(--stroke);margin:10px 0}.mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace}small.m{opacity:.8}footer{height:24px}#tests{position:fixed;right:10px;bottom:10px;background:#0f1118;border:1px solid var(--stroke);border-radius:10px;padding:6px 8px;font:700 10px var(--mont);opacity:.85;z-index:99}.toast{position:fixed;left:50%;bottom:28px;transform:translateX(-50%);background:#11161f;border:1px solid var(--stroke);border-radius:10px;padding:10px 12px;font:700 12px var(--mont);opacity:0;pointer-events:none;transition:opacity .2s,transform .2s}.toast.show{opacity:1;transform:translateX(-50%) translateY(-4px)}.info{display:inline-flex;align-items:center;justify-content:center;width:16px;height:16px;border-radius:50%;border:1px solid var(--stroke);font:800 10px var(--mont);cursor:help;position:relative}.tip-card{position:absolute;left:0;top:calc(100% + 8px);background:#0e1424;border:1px solid rgba(255,255,255,.38);border-radius:10px;padding:12px 14px;width:300px;box-shadow:0 12px 26px rgba(0,0,0,.55);opacity:0;pointer-events:none;transform:translateY(-4px);transition:opacity .12s,transform .12s;z-index:90;color:#eef3ff;line-height:1.35;letter-spacing:.1px}.tip-card.show{opacity:1;transform:translateY(0);pointer-events:auto}.tag:focus .tip-card,.info:focus .tip-card{opacity:1;transform:translateY(0);pointer-events:auto}.tip-card b{font:800 12px var(--mont);color:#fff}.tip-card p{margin:6px 0 4px;font-size:12px;opacity:.98;color:#f3f6ff}.tip-card a{display:inline-block;margin-top:6px;font:800 11px var(--mont);text-decoration:underline;color:#cfe0ff}
.gate{max-width:980px;margin:18px auto 0;padding:14px 20px}.hero{display:grid;gap:16px;grid-template-columns:1fr}@media(min-width:900px){.hero{grid-template-columns:1fr 1fr}}.gate-card{border:1px solid var(--stroke);border-radius:18px;padding:16px;background:linear-gradient(180deg,#0e1118,#0b0d12)}.cta-row{display:flex;gap:10px;flex-wrap:wrap}.emoji-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;min-height:120px}.emoji-grid:empty::before{content:'Loading…';opacity:.7;font:600 12px var(--inter)}@media(min-width:700px){.emoji-grid{grid-template-columns:repeat(3,1fr)}}.emoji-tile{display:flex;align-items:center;justify-content:flex-start;gap:10px;padding:12px;border:1px solid var(--stroke);border-radius:14px;background:#0d1016;cursor:pointer;user-select:none}.emoji-tile.active{outline:2px solid rgba(134,247,214,.35)}.emoji{font-size:20px}.gate-row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:8px}.gate .btn{border:1px solid var(--stroke);border-radius:12px;background:#fff;color:#0a0b10;padding:10px 14px;font:800 12px var(--mont);cursor:pointer}.gate .mut{opacity:.85}.gate .pill{user-select:none}
.loading{position:fixed;inset:0;background:radial-gradient(1200px 800px at 50% 40%,rgba(255,255,255,.08),rgba(0,0,0,.9)),#05070a;display:none;align-items:center;justify-content:center;z-index:80}.orb{position:absolute;width:280px;height:280px;border-radius:50%;filter:blur(40px);opacity:.35}.o1{background:conic-gradient(from 0deg,#86f7d6,transparent);left:14%;top:22%;animation:f1 9s linear infinite}.o2{background:conic-gradient(from 90deg,#57a4ff,transparent);right:18%;bottom:18%;animation:f2 12s linear infinite}@keyframes f1{to{transform:rotate(360deg)}}@keyframes f2{to{transform:rotate(-360deg)}}@media(prefers-reduced-motion:reduce){.o1,.o2{animation:none}}.load-card{position:relative;border:1px solid var(--stroke);border-radius:18px;padding:18px;max-width:520px;width:92%;background:linear-gradient(180deg,#0e1118,#0b0d12);box-shadow:0 12px 48px rgba(0,0,0,.4)}.load-bar{height:8px;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden;border:1px solid var(--stroke)}.load-bar span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--good),var(--accent))}
:focus-visible{outline:2px solid rgba(87,164,255,.7);outline-offset:2px;border-radius:8px}
</style></head>
<body>
<header><div class="nav"><a class="brand" href="#" aria-label="Galactly home"><svg viewBox="0 0 64 64" aria-hidden="true"><defs><linearGradient id="g" x1="0" x2="1"><stop stop-color="#86f7d6"/><stop offset="1" stop-color="#57a4ff"/></linearGradient></defs><circle cx="32" cy="32" r="30" fill="#000" stroke="white" stroke-opacity=".15" stroke-width="2"/><path d="M12 36c8 8 18 12 28 12 4 0 8-1 12-2" stroke="url(#g)" stroke-width="4" fill="none"/><circle cx="20" cy="20" r="6" fill="url(#g)"/></svg><b>Galactly</b></a><button id="trainBtn" class="ticker-btn">Arrange more of these leads</button><div class="badge-live"><span class="pulse tiny"><span class="dot"></span>Live leads &lt;30s</span><div class="kv"><small>Humans online</small><b id="humans">0</b></div><div class="kv"><small>Next refresh</small><b id="refresh">00:15</b></div></div></div></header>
<section id="gate" class="gate" aria-label="Onboarding"><div class="hero"><div class="gate-card"><div class="h2">What do you make?</div><div id="industryGrid" class="emoji-grid" aria-label="Industries" role="group"></div><div class="gate-row"><span class="mut">Pick 1–3. You can edit later.</span></div><div class="hr" style="margin:12px 0"></div><div class="h2">Where do you sell?</div><div class="gate-row" id="regionRow"></div><div class="hr" style="margin:12px 0"></div><div class="gate-row"><label class="pill"><input id="gateAlerts" type="checkbox"/> Enable Email Alerts</label><input id="gateEmail" class="input" placeholder="you@company.com" aria-label="Business email"/></div><div class="cta-row" style="margin-top:12px"><button id="gateContinue" class="btn">Continue</button><button id="gateSkip" class="btn" style="background:#0f1118;color:#fff">Skip for now</button><span class="mut" id="gateHint">Private by default. No spam.</span></div></div><div class="gate-card"><div class="h2">Why we ask</div><p class="mut">We tune your feed to real buyer intent for your products in your selected markets. We hide sensitive bits until your Fair‑Play score rises.</p><ul class="mut" style="margin-top:6px"><li>Leads from your markets only in the free pool.</li><li>Press & hold to claim. 60s reserve window.</li><li>Abuse protection: checks & cooldowns, stricter outside US/CA.</li></ul></div></div></section>
<div id="loading" class="loading" aria-hidden="true"><div class="orb o1"></div><div class="orb o2"></div><div class="load-card"><div class="h2">Learning your business…</div><div class="mut" style="opacity:.9">Tuning categories, keywords, and platforms based on your picks.</div><div class="hr"></div><div class="load-bar" aria-label="Progress"><span id="loadFill"></span></div><div class="kv" style="margin-top:8px"><small>Signal sources</small><b id="loadSources">0</b></div></div></div>
<main id="app" class="main" hidden><section class="panel" aria-label="Live Leads"><div class="h2">Live Leads</div><div class="controls"><span class="pill" data-filter="all">All</span><span class="pill" data-filter="Flexible">Flexible</span><span class="pill" data-filter="Corrugated">Corrugated</span><span class="pill" data-filter="Labels">Labels</span><span class="pill" data-filter="Folding">Folding</span><span class="pill" data-filter="Crating">Crating</span><div class="right"><input id="q" class="input" placeholder="Search keyword"/><label class="tiny" style="display:flex;align-items:center;gap:8px">Min fit <input id="fitMin" class="range" type="range" min="60" max="99" value="80"/></label></div></div><div id="list" class="list" role="list"></div></section><aside class="stack" aria-label="Right rail status & controls"><div class="box"><h3>Your status <span class="info" tabindex="0" aria-label="Your status info">i<span class="tip-card" role="tooltip"><b>Your status</b><p>Fair‑Play, Priority, and Cooldown explain your visibility and speed. Higher scores unlock faster claiming and richer previews.</p><a href="#status">Learn more →</a></span></span></h3><div class="rowX"><span>Fair‑Play score</span><span class="badge fp" id="fpChip">82</span></div><div class="rowX"><span>Priority rank</span><span class="mono" id="prio">—</span></div><div class="rowX"><span>Cooldown</span><span class="mono" id="cooldown">0s</span></div><div class="multipliers" id="multipliers"><span class="mul ok" id="mVerified">+1.2× Verified</span><span class="mul on" id="mAlerts">+1.1× Alerts on</span><span class="mul bill" id="mPayment">+1.3× Payment on file</span></div></div><div class="box"><h3>Claim Alerts <span class="info" tabindex="0" aria-label="Claim Alerts info">i<span class="tip-card" role="tooltip"><b>Claim Alerts</b><p>Turn on email to receive contact + first draft for 60s before public listing. Owning within the window boosts Fair‑Play.</p><a href="#alerts">Learn more →</a></span></span></h3><div class="rowX switch"><label><input id="alertEmail" type="checkbox"/> Email</label></div><div class="alert">When you claim, we open a 60-second window. We send contact + first message draft. If you don’t <b>Own</b> or <b>Arrange more like this</b> in 5 minutes, score dips and the lead returns to pool.</div><div class="cta"><button class="hold" id="ownAlerts"><span class="fill"></span><span>Own early alerts</span></button><button class="hold" id="howAlerts"><span class="fill"></span><span>How this works</span></button></div></div><div class="box ft"><h3>Fine‑tune your AI <span class="info" tabindex="0" aria-label="Fine‑tune info">i<span class="tip-card" role="tooltip"><b>Fine‑tune</b><p>Describe your ideal buyers, regions, and MOQs. Uploads stay private and improve ranking.</p><a href="#fine-tune">Learn more →</a></span></span></h3><div class="rowX"><label><input id="visConsent" type="checkbox"/> Feature my business to 90+ fit buyers</label></div><div class="rowX"><label><input id="joinPool" type="checkbox"/> Join the pool (let buyers find me)</label></div><div class="rowX"><input id="ftFiles" class="input" type="file" multiple/></div><div class="rowX"><textarea id="ftDesc" placeholder="Describe what you sell, ideal buyer, regions, MOQs. Example: Short‑run corrugated mailers, 500–5,000 qty, 10‑day lead time, US East."></textarea></div><div class="cta"><button class="hold" id="ftApply"><span class="fill"></span><span>Let AI decide</span></button></div><div class="hint" id="ftHint">Uploads stay private. Improves fit scoring & ranking.</div></div><div class="box"><h3>Opportunity & Scale</h3><div class="rowX"><label><input id="heatShield" type="checkbox" checked/> Heat Shield (hide details for low score)</label></div><div class="rowX"><label>Region <select id="region" class="input"><option>US</option><option>Canada</option><option>Other</option></select></label></div></div></aside></main>
<div class="modal" id="modalHuman" aria-hidden="true"><div class="panel"><span class="close" data-close>✕</span><h3>Quick check</h3><p>Press & hold the button until it completes.</p><div class="hr"></div><button class="hold" id="humanHold"><span class="fill"></span><span>I'm human</span></button></div></div>
<div class="modal" id="modalClaim" aria-hidden="true"><div class="panel"><span class="close" data-close>✕</span><h3 id="claimTitle">Lead reserved (60s)</h3><div id="claimBody"></div><div class="hr"></div><div class="rowX"><span>Reserve ends in</span><span class="mono" id="reserveTimer">60s</span></div><div class="rowX"><span>Decision deadline</span><span class="mono" id="decisionTimer">05:00</span></div><div class="hr"></div><div class="cta"><button class="hold" id="btnOwn"><span class="fill"></span><span>Own lead</span></button><button class="hold" id="btnMore"><span class="fill"></span><span>Arrange more like this</span></button></div></div></div>
<div class="modal" id="modalHow" aria-hidden="true"><div class="panel"><span class="close" data-close>✕</span><h3>Early Alerts — 60s head start</h3><div class="hr"></div><ol style="margin:0 0 8px 18px;opacity:.9"><li>You press & hold <b>Claim</b>.</li><li>We reserve it for 60s and send you contact + first draft by email.</li><li>You can <b>Own</b> it to remove from pool, or keep it reserved while you reach out.</li><li>If no action in 5 mins, it returns to pool and your score dips a bit.</li></ol><div class="hr"></div><div class="tiny">Turn on Email alerts to receive the draft before the lead lists publicly.</div></div></div>
<div class="modal" id="modalTrain" aria-hidden="true"><div class="panel"><span class="close" data-close>✕</span><h3>Arrange more of these leads</h3><div id="trainBody"></div><div class="hr"></div><div class="cta"><button class="hold" id="boostNow"><span class="fill"></span><span>Boost these</span></button><button class="hold" id="resetBoosts"><span class="fill"></span><span>Reset boosts</span></button></div><div class="tiny">We boost categories, keywords, and platforms you pick. You can reset anytime.</div></div></div>
<div id="tests">tests: —</div><div class="toast" id="toast"></div>
<script data-app data-no-pm-scan>(function(){var box=document.getElementById('tests');function ownOrigin(ev){try{return ev&&(ev.filename?ev.filename.startsWith(location.origin):true)}catch{return true}}window.addEventListener('error',function(ev){if(box&&ownOrigin(ev)&&!(ev&&ev.message&&/postMessage/i.test(ev.message))){box.textContent+=' | runtime: '+(ev&&ev.message?ev.message:'error')}});window.addEventListener('unhandledrejection',function(ev){const msg=(ev&&ev.reason&&ev.reason.message)?ev.reason.message:String(ev&&ev.reason||'');if(box&&!/postMessage/i.test(msg))box.textContent+=' | promise: '+msg;});}());</script>
<script data-app>(()=>{const g=(k,d)=>{try{const v=localStorage.getItem(k);return v!==null?JSON.parse(v):d}catch{return d}},s=(k,v)=>localStorage.setItem(k,JSON.stringify(v)),rid=()=> (crypto&&crypto.randomUUID)?crypto.randomUUID():String(Math.random()).slice(2),FIRST=("Ava,Noah,Sophia,Liam,Isabella,Elijah,Mia,Lucas,Amelia,Mason,Harper,Logan,James,Abigail,Oliver,Emily,Alexander,Sofia,Michael,Charlotte,Chloe,Henry,Nora,Leo,Hannah,Wyatt,Lily,Caleb,Addison,Levi,Ellie,Isaac,Audrey,Julian,Penelope,Grayson,Stella,Thea,Carson,Riley,Colin,Piper,Jason,Sadie,Adrian,Georgia,Jonah,Quinn,Nina,Luca,Khloe,Emma,Aiden,William,Scarlett,Layla,Aria,Jack,Ben,Daniel,Grace,Zoey,Matthew,Victoria,Joseph,Luna,Mila,David,Jackson,Sebastian,Mateo,Emily,Ryan,Adam,Thomas,Ivy,Eva,Clara").split(","),LAST=("Smith,Johnson,Williams,Brown,Jones,Miller,Davis,Garcia,Wilson,Moore,Taylor,Anderson,Thomas,Jackson,White,Martin,Lee,Thompson,Walker,Young,Allen,King,Wright,Scott,Torres,Nguyen,Hill,Green,Adams,Baker,Hall,Rivera,Campbell,Mitchell,Carter,Roberts,Phillips,Evans,Turner,Parker,Collins,Edwards,Stewart,Morris,Rogers,Reed,Cook,Cooper,Howard,Cox,Diaz,Richardson,Wood").split(","),COS=("FreshFoods,BoxPro,GreenCrate,RapidShip,PalletCo,SnackWorks,LabelLab,FlexiPack,PrimeCarton,Coastline Goods,UrbanBite,North Fork Foods,Sunrise Snacks,Blue Ribbon Labels,MetalLeaf,Peak Pouches,EverCrate,JetCarton,PrimeFlex,TruLabel,Forest Cartons,Swift Freight,NeoPack,Atlas Packaging").split(","),SKUS=["stand-up pouches","corrugated RSC","labels","rollstock","mailer boxes","tray & insert","barrier bags","die-cut mailers","short-run cartons","foil cartons","ISPM-15 pallets","export crates"],PLATS=["Google","LinkedIn","Reddit","X","Instagram","Forums","YouTube"],CATS=["Flexible","Corrugated","Labels","Folding","Crating"],REGIONS=["US","Canada","Other"];const rnd=(a,b)=>(a+Math.random()*(b-a))|0,hour=()=>new Date().getHours(),day=()=>hour()>=8&&hour()<=18,store={prefs:g('prefs',{cat:{},kw:{},plat:{}}),fp:Number(localStorage.getItem('fp')||'82'),cooldown:g('cooldown',0),abuse:Number(localStorage.getItem('abuse')||'0'),alertsOn:g('alertsOn',false),region:g('region','US'),industries:g('industries',[]),email:g('email',''),windows:new Map(),pool:new Map(),nextRefreshSec:15,lastBatchTs:0,multipliers:{verified:1.2,alerts:1.0,payment:1.3},instantAllowance:g('instantAllowance',rnd(2,5))};function pW(arr,w){const ws=arr.map(k=>Math.max(.0001,(w[k]||0)+1)),sum=ws.reduce((a,b)=>a+b,0);let r=Math.random()*sum;for(let i=0;i<arr.length;i++){r-=ws[i];if(r<=0)return arr[i]}return arr[arr.length-1]}function newLead(){const catPref=store.industries.length?store.industries[(Math.random()*store.industries.length)|0]:null,cat=catPref||pW(CATS,store.prefs.cat),first=FIRST[(Math.random()*FIRST.length)|0],whoFull=`${first} ${LAST[(Math.random()*LAST.length)|0]}`,company=COS[(Math.random()*COS.length)|0],kw=pW(SKUS,store.prefs.kw),plat=pW(PLATS,store.prefs.plat),fitBase=rnd(70,99),yourFit=Math.max(60,Math.min(99,fitBase+rnd(-6,6))),compFit=Math.min(99,Math.max(yourFit+rnd(-4,7),yourFit,yourFit+(Math.random()<.4?2:0))),hotRaw=Math.random()<.12?rnd(92,99):rnd(78,91),heat=hotRaw>=92?'HOT':hotRaw>=86?'WARM':'OK',region=REGIONS[(Math.random()*REGIONS.length)|0],id=rid(),age=rnd(2,27);return{id,first,kw,cat,plat,fit:yourFit,compFit,heat,age,region,whoFull,company}}function batchSize(){return day()?rnd(28,46):rnd(6,18)}function humansBase(){return day()?rnd(180,340):rnd(42,120)}function seed(){store.pool.clear();const n=batchSize();for(let i=0;i<n;i++){const L=newLead();store.pool.set(i+':'+Date.now(),L)}store.lastBatchTs=Date.now()}if(store.lastBatchTs===0)seed();const realFetch=(typeof window.fetch==='function')?window.fetch.bind(window):null;window.fetch=async(input,init={})=>{try{const url=typeof input==='string'?input:(input&&input.url);if(!url||!url.startsWith('/api/v1/')){if(realFetch)return realFetch(input,init);throw new Error('fetch not available')}const u=new URL(url,location.origin),path=u.pathname.replace('/api/v1',''),json=(obj,status=200)=>new Response(JSON.stringify(obj),{status,headers:{'Content-Type':'application/json'}});if(store.cooldown>0){store.cooldown=Math.max(0,store.cooldown-1);s('cooldown',store.cooldown)}if(store.nextRefreshSec<=0){const harsh=store.region==='Other'?2.2:1.0,add=Math.min(180,Math.round((10+store.abuse*12)*harsh));store.nextRefreshSec=15+add}if(path==='/gate'&&init.method==='POST'){const body=JSON.parse(init.body||'{}');const{industries=[],region='US',email='',alerts=false}=body;store.industries=industries.slice(0,3);store.region=region;store.email=email;store.alertsOn=!!alerts;s('industries',store.industries);s('region',store.region);s('email',store.email);s('alertsOn',store.alertsOn);if(/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)&&(region==='US'||region==='Canada')){store.fp=Math.min(99,store.fp+3);localStorage.setItem('fp',String(store.fp))}seed();return json({ok:true})}if(path==='/leads'&&(!init.method||init.method==='GET')){const cat=u.searchParams.get('cat')||'all',fitMin=+(u.searchParams.get('fitMin')||60),q=(u.searchParams.get('q')||'').toLowerCase(),region=u.searchParams.get('region')||'US';store.region=region;s('region',region);if(Date.now()-store.lastBatchTs>60*1000||store.pool.size===0)seed();const leads=[];for(const L of store.pool.values()){if(L.region !== region) continue;if(cat!=='all'&&L.cat!==cat)continue;if(L.fit<fitMin)continue;if(q){const hit=L.kw.toLowerCase().includes(q)||L.cat.toLowerCase().includes(q)||L.plat.toLowerCase().includes(q);if(!hit)continue}leads.push({id:L.id,first:L.first,kw:L.kw,cat:L.cat,plat:L.plat,fit:L.fit,compFit:L.compFit,heat:L.heat,age:Math.max(0,L.age+((Date.now()-store.lastBatchTs)/1000|0)),region:L.region});if(leads.length>=48)break}return json({leads,humansOnline:humansBase()+rnd(-6,6),nextRefreshSec:store.nextRefreshSec})}if(path==='/claim'&&init.method==='POST'){const{leadId}=JSON.parse(init.body||'{}'),L=[...store.pool.values()].find(x=>x.id===leadId);if(!L)return json({error:'Lead expired'},410);if(store.instantAllowance>0){store.instantAllowance--;s('instantAllowance',store.instantAllowance)}else{const extra=Math.min(.88,.18+store.abuse*.12+(store.region==='Other'?.3:0));if(Math.random()<extra)return json({needHumanCheck:true},403)}const windowId=rid(),now=Date.now();store.windows.set(windowId,{leadId,expiresAt:now+60*1000,decisionDeadline:now+5*60*1000});store.abuse+=1;localStorage.setItem('abuse',String(store.abuse));const base=7,step=Math.min(300,Math.round(store.abuse*14*(store.region==='Other'?1.8:1)));store.cooldown=base+step;s('cooldown',store.cooldown);return json({reservedForSec:60,reveal:{whoFull:L.whoFull,company:L.company,contact:{email:`${L.first.toLowerCase()}@${(L.company||'example').replace(/\s+/g,'').toLowerCase()}.com`}},windowId})}if(path==='/own'&&init.method==='POST'){const{windowId}=JSON.parse(init.body||'{}'),w=store.windows.get(windowId);if(!w)return json({error:'Window not found'},404);store.windows.delete(windowId);for(const[k,v]of store.pool.entries())if(v.id===w.leadId)store.pool.delete(k);store.fp=Math.min(99,store.fp+(store.alertsOn?4:2));localStorage.setItem('fp',String(store.fp));store.abuse=Math.max(0,store.abuse-1);localStorage.setItem('abuse',String(store.abuse));return json({ok:true})}if(path==='/arrange-more'&&init.method==='POST'){const{leadId}=JSON.parse(init.body||'{}'),L=[...store.pool.values()].find(x=>x.id===leadId);if(L){store.prefs.cat[L.cat]=(store.prefs.cat[L.cat]||0)+.4;store.prefs.kw[L.kw]=(store.prefs.kw[L.kw]||0)+.6;store.prefs.plat[L.plat]=(store.prefs.plat[L.plat]||0)+.3;s('prefs',store.prefs)}store.fp=Math.min(99,store.fp+1);localStorage.setItem('fp',String(store.fp));return json({ok:true})}if(path==='/human-check'&&init.method==='POST'){store.fp=Math.min(99,store.fp+2);localStorage.setItem('fp',String(store.fp));return json({ok:true,fpDelta:2})}if(path==='/alerts'&&init.method==='POST'){const{emailOn}=JSON.parse(init.body||'{}');store.alertsOn=!!emailOn;s('alertsOn',store.alertsOn);return json({ok:true})}if(path==='/fine-tune'&&init.method==='POST'){const body=JSON.parse(init.body||'{}');const{consent,joinPool,desc=''}=body,t=String(desc).toLowerCase();if(/corrug|carton/.test(t))store.prefs.cat.Corrugated=(store.prefs.cat.Corrugated||0)+.8;if(/pouch|flex|rollstock|film/.test(t))store.prefs.cat.Flexible=(store.prefs.cat.Flexible||0)+.8;if(/label/.test(t))store.prefs.cat.Labels=(store.prefs.cat.Labels||0)+.7;if(t)store.prefs.kw[t.slice(0,24)]=(store.prefs.kw[t.slice(0,24)]||0)+.4;s('prefs',store.prefs);if(consent||joinPool){store.fp=Math.min(99,store.fp+2);localStorage.setItem('fp',String(store.fp))}return json({ok:true})}if(path==='/status'&&(!init.method||init.method==='GET')){const multipliers={verified:store.multipliers.verified,alerts:store.alertsOn?1.1:1.0,payment:store.multipliers.payment},priority=+(store.fp*multipliers.verified*multipliers.alerts*multipliers.payment).toFixed(1);return json({fp:store.fp,cooldownSec:store.cooldown,priority,multipliers})}return json({error:'Not found'},404)}catch(err){if(realFetch)return realFetch(input,init);throw err}};window.__MOCK={store};})();</script>
<script data-app>(function(){const $=id=>document.getElementById(id),gate=$('gate'),app=$('app'),loading=$('loading'),loadFill=$('loadFill'),loadSources=$('loadSources'),industryGrid=$('industryGrid'),regionRow=$('regionRow'),gateContinue=$('gateContinue'),gateSkip=$('gateSkip'),gateEmail=$('gateEmail'),gateAlerts=$('gateAlerts'),gateHint=$('gateHint');const industries=[{id:'Flexible',label:'Flexible Packaging',emoji:'🫙'},{id:'Corrugated',label:'Corrugated',emoji:'📦'},{id:'Labels',label:'Labels',emoji:'🏷️'},{id:'Folding',label:'Folding Cartons',emoji:'📁'},{id:'Crating',label:'Crating & Pallets',emoji:'🪵'},{id:'Other',label:'Other Packaging',emoji:'🧰'}];const selected=new Set(JSON.parse(localStorage.getItem('industries')||'[]'));function renderIndustries(){industryGrid.innerHTML='';industries.forEach(x=>{const n=document.createElement('button');n.type='button';n.className='emoji-tile';n.dataset.id=x.id;n.setAttribute('aria-pressed',selected.has(x.id)?'true':'false');if(selected.has(x.id))n.classList.add('active');n.innerHTML=`<span class="emoji">${x.emoji}</span><div><div style="font:800 14px var(--mont)">${x.label}</div><small class="mut">${x.id==='Other'?'General / custom':x.id}</small></div>`;n.addEventListener('click',()=>{if(selected.has(x.id))selected.delete(x.id);else if(selected.size<3)selected.add(x.id);n.classList.toggle('active');n.setAttribute('aria-pressed',selected.has(x.id)?'true':'false');localStorage.setItem('industries',JSON.stringify([...selected]))});industryGrid.appendChild(n)})}const regions=['US','Canada','Other'];function renderRegions(){regionRow.innerHTML='';regions.forEach(r=>{const btn=document.createElement('span');btn.className='pill';btn.textContent=r;btn.setAttribute('role','button');btn.tabIndex=0;if((JSON.parse(localStorage.getItem('region')||'"US"'))===r)btn.classList.add('active');btn.addEventListener('click',()=>{regionRow.querySelectorAll('.pill').forEach(p=>p.classList.remove('active'));btn.classList.add('active');localStorage.setItem('region',JSON.stringify(r))});btn.addEventListener('keydown',e=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();btn.click()}});regionRow.appendChild(btn)})}renderIndustries();renderRegions();gateAlerts.checked=JSON.parse(localStorage.getItem('alertsOn')||'false');gateEmail.value=JSON.parse(localStorage.getItem('email')||'""');gateEmail.addEventListener('keydown',e=>{if(e.key==='Enter'){e.preventDefault();gateContinue.click()}});function showLoading(){loading.style.display='flex';let p=0,sources=0;const int=setInterval(()=>{p=Math.min(100,p+3+(Math.random()*6|0));sources+=(1+Math.random()*3|0);loadFill.style.width=p+'%';loadSources.textContent=String(sources);if(p>=100){clearInterval(int);setTimeout(()=>{loading.style.display='none';app.hidden=false;},350)}},160)}async function resumeApp(){try{const inds=JSON.parse(localStorage.getItem('industries')||'[]').filter(x=>x!=='Other');const region=JSON.parse(localStorage.getItem('region')||'"US"');const email=JSON.parse(localStorage.getItem('email')||'""');const alerts=JSON.parse(localStorage.getItem('alertsOn')||'false');await fetch('/api/v1/gate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({industries:inds.length?inds:['Flexible'],region,email,alerts})});}catch{}showLoading();gate.remove();initApp()}function showGateError(msg){gateHint.textContent=msg;gateHint.style.color='var(--hot)';setTimeout(()=>{gateHint.textContent='Private by default. No spam.';gateHint.style.color='var(--mut)';},3000)}gateContinue.addEventListener('click',async()=>{if(selected.size===0){showGateError('Please pick at least one industry');return}const email=gateEmail.value.trim();if(gateAlerts.checked&&!email){showGateError('Please enter your email for alerts');return}if(gateAlerts.checked&&!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)){showGateError('Please enter a valid email for alerts');return}const inds=[...selected].filter(x=>x!=='Other');const region=JSON.parse(localStorage.getItem('region')||'"US"');const alerts=gateAlerts.checked;localStorage.setItem('industries',JSON.stringify(inds.length?inds:['Flexible']));localStorage.setItem('alertsOn',JSON.stringify(alerts));localStorage.setItem('email',JSON.stringify(email));await resumeApp()});gateSkip.addEventListener('click',async()=>{if(selected.size===0){showGateError('Please pick at least one industry');return}localStorage.setItem('skipGate','true');await resumeApp()});const params=new URLSearchParams(location.search);if(params.has('reset')){try{localStorage.clear()}catch{}}const autoDev=params.has('dev')||params.has('auto')||localStorage.getItem('skipGate')==='true';if(autoDev){resumeApp()}function initApp(){const qEl=$('q'),fitMin=$('fitMin'),humansEl=$('humans'),refreshEl=$('refresh'),fpChip=$('fpChip'),prioEl=$('prio'),cooldownEl=$('cooldown'),regionEl=$('region'),visConsent=$('visConsent'),joinPool=$('joinPool'),heatShield=$('heatShield'),alertEmail=$('alertEmail'),testsEl=$('tests'),trainBtn=$('trainBtn'),ftDesc=$('ftDesc'),ftApply=$('ftApply'),howAlerts=$('howAlerts'),toast=$('toast'),list=$('list');const saved=(k,d)=>{try{const v=localStorage.getItem(k);return v!==null?JSON.parse(v):d}catch{return d}},save=(k,v)=>localStorage.setItem(k,JSON.stringify(v));const state={nextIn:15,prefs:saved('prefs',{cat:{},kw:{},plat:{}}),filterCat:saved('filterCat','all'),fitMin:saved('fitMin',80),q:saved('q','')};const CATS=['Flexible','Corrugated','Labels','Folding','Crating'];function tipTag(label,subject,desc,slug){return `<span class="tag" tabindex="0" aria-label="${subject}">${label}<span class="tip-card" role="tooltip"><b>${subject}</b><p>${desc}</p><a href="#${slug}">Learn more →</a></span></span>`}function recomputePriorityUI(){fetch('/api/v1/status').then(r=>r.json()).then(st=>{fpChip.textContent=st.fp;prioEl.textContent=(+st.priority).toFixed(1)+'×';cooldownEl.textContent=(st.cooldownSec||0)+'s'})}function toastMsg(m){toast.textContent=m;toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),1600)}let ageNodes=new Map(),leadsCache=[];function renderList(leads){list.innerHTML='';ageNodes.clear();let shown=0;const term=(qEl.value||'').trim().toLowerCase(),minF=+(fitMin.value||80),heatOn=heatShield.checked,fp=parseInt(fpChip.textContent||'82',10);for(const L of leads){if(L.fit<minF)continue;if(term&&!(L.kw.toLowerCase().includes(term)||L.cat.toLowerCase().includes(term)||L.plat.toLowerCase().includes(term)))continue;const hideTitle=heatOn&&fp<70,hideDeep=heatOn&&fp<65,ghost=hideTitle?'ghost':'',compBadge=fp>=75?`<span class="badge">Highest fit ${L.compFit}</span>`:'',youBadge=`<span class="badge ok">Your fit ${L.fit}</span>`,fairBadge=`<span class="badge fp">Fair-Play ${fp}</span>`,platTag=hideDeep?'•••':L.plat,kwTag=hideDeep?'•••':`"${L.kw}"`,regionTag=`Region: ${L.region}`,tags=`<span class="tag ${L.heat==='HOT'?'hot':(L.heat==='WARM'?'warn':'good')}">${L.cat}</span>${tipTag(`Signal: ${platTag}`,'Signal','Platform/medium detected by AI with supporting metadata (e.g., query, referrer, social activity).','signal')}${tipTag(`${kwTag}`,'Keyword','Exact theme/term associated to this lead by AI across sources; drives relevance and routing.','keyword')}${tipTag(`Pattern: ${1+((Math.random()*3)|0)}x/48h`,'Pattern','Recency/frequency of intent across the last 48h; higher suggests readiness.','pattern')}${tipTag(`Competitive heat: ${L.heat}`,'Competitive heat','Relative interest from other suppliers; expect faster claim/response cycles.','heat')}${tipTag(`${regionTag}`,'Region','Geographic signal used for prioritization and anti‑abuse tuning.','region')}<span class="tag dim"><span class="age" data-age="${L.id}">${L.age}</span>s ago</span>`,reason=`Surfaced due to recent interest in ${kwTag.replace(/\"/g,'"')} and alignment with your preferences.`,node=document.createElement('div');node.className='card';node.innerHTML=`<div class="row"><div class="title ${ghost}">${L.first} • ${L.kw}</div><div class="meta">${tags}</div><div class="reason ${hideDeep?'ghost':''}">${reason}</div></div><div class="split"><div class="leftBits"><div class="kpi"><b>${L.heat}</b> lead</div><div class="fit"><div class="bar"><span style="width:${L.fit}%"></span></div><small class="m">fit</small></div>${hideDeep?'<div class="badge">Heat Shield active</div>':''}<div class="badges">${youBadge}${compBadge}${fairBadge}</div></div></div><div class="actions-bottom"><button class="hold" data-claim="${L.id}"><span class="fill"></span><span>Press/Hold to Claim</span></button></div>`;list.appendChild(node);shown++;if(shown>=24)break}list.querySelectorAll('[data-age]').forEach(s=>ageNodes.set(s.getAttribute('data-age'),s));wireTooltips(list);list.scrollTop=0;wireClaims()}function fetchAndRender(){const cat=state.filterCat,q=encodeURIComponent(qEl.value||''),fit=+fitMin.value||80,region=regionEl.value;fetch(`/api/v1/leads?cat=${cat}&fitMin=${fit}&q=${q}&region=${region}`).then(r=>r.json()).then(d=>{humansEl.textContent=d.humansOnline;refreshEl.textContent='00:'+String(Math.max(0,d.nextRefreshSec)).padStart(2,'0');leadsCache=d.leads||[];renderList(leadsCache)})}
let __openTipCard=null;function wireTooltipTrigger(el){if(!el||el.__tt)return;const card=el.querySelector('.tip-card');if(!card){el.__tt=true;return}let hoverCount=0,hideT=null;function open(){if(__openTipCard&&__openTipCard!==card){__openTipCard.classList.remove('show')}clearTimeout(hideT);card.classList.add('show');__openTipCard=card}function schedule(){clearTimeout(hideT);hideT=setTimeout(()=>{if(hoverCount<=0){card.classList.remove('show');if(__openTipCard===card)__openTipCard=null}},140)}el.addEventListener('mouseenter',()=>{hoverCount++;open()});el.addEventListener('mouseleave',()=>{hoverCount--;schedule()});el.addEventListener('focus',()=>{hoverCount++;open()});el.addEventListener('blur',()=>{hoverCount--;schedule()});card.addEventListener('mouseenter',()=>{hoverCount++;open()});card.addEventListener('mouseleave',()=>{hoverCount--;schedule()});el.__tt=true}function wireTooltips(root=document){root.querySelectorAll('.tag, .info').forEach(wireTooltipTrigger)}
function wireHold(btn,opts){if(!btn)return;let t0=null,raf=null,done=false;const fill=btn.querySelector('.fill'),need=opts?.ms||1200,setP=p=>{if(fill)fill.style.width=(p*100).toFixed(2)+'%'},up=()=>{btn.classList.remove('holding');setP(0);if(raf)cancelAnimationFrame(raf);t0=null;done=false},step=ts=>{if(!t0)t0=ts;const p=Math.min(1,(ts-t0)/need);setP(p);if(p>=1&&!done){done=true;opts?.onComplete?.();up();return}raf=requestAnimationFrame(step)};btn.addEventListener('mousedown',()=>{if(btn.disabled)return;btn.classList.add('holding');requestAnimationFrame(step)});['mouseup','mouseleave'].forEach(e=>btn.addEventListener(e,up));btn.addEventListener('touchstart',()=>{if(btn.disabled)return;btn.classList.add('holding');requestAnimationFrame(step)},{passive:true});btn.addEventListener('touchend',up)}
const modalHuman=$('modalHuman'),humanHoldBtn=$('humanHold');wireHold(humanHoldBtn,{ms:1000,onComplete:()=>{fetch('/api/v1/human-check',{method:'POST'}).then(r=>r.json()).then(()=>{modalHuman.style.display='none';recomputePriorityUI();toastMsg('Human check passed (+2 FP)')})}});document.addEventListener('click',e=>{if(e.target.hasAttribute('data-close')){e.preventDefault();const m=e.target.closest('.modal');if(m)m.style.display='none';clearInterval(reserveInt);clearInterval(decisionInt)}});
const modalClaim=$('modalClaim'),claimTitle=$('claimTitle'),claimBody=$('claimBody'),btnOwn=$('btnOwn'),btnMore=$('btnMore'),reserveTimerEl=$('reserveTimer'),decisionTimerEl=$('decisionTimer');let reserveInt=null,decisionInt=null,claimActed=false,lastWindowId=null;function fmt(s){const m=(s/60|0),ss=String(s%60).padStart(2,'0');return `${String(m).padStart(2,'0')}:${ss}`}function openClaim(lead,windowId){claimActed=false;lastWindowId=windowId;claimTitle.textContent='Lead reserved (60s)';claimBody.innerHTML=`<div class="row" style="gap:10px;flex-wrap:wrap"><div class="kpi"><b>${lead.company}</b></div><div class="kpi">${lead.whoFull}</div><div class="kpi">${lead.cat}</div><div class="kpi">${lead.plat}</div><div class="kpi">"${lead.kw}"</div></div><div class="hr"></div><div><b>Not owned.</b> Others can still claim. Turn on <b>Claim Alerts</b> to auto-contact before it lists.</div><div class="hr"></div><div class="rowX"><span>Your fit</span><span class="mono">${lead.fit}</span></div><div class="rowX"><span>Highest competing fit</span><span class="mono">${lead.compFit}</span></div>`;modalClaim.style.display='flex';let r=60;clearInterval(reserveInt);reserveTimerEl.textContent=r+'s';reserveInt=setInterval(()=>{r--;reserveTimerEl.textContent=r+'s';if(r<=0){clearInterval(reserveInt);reserveTimerEl.textContent='0s';toastMsg('Reserve window ended')}},1000);let d=300;clearInterval(decisionInt);decisionTimerEl.textContent=fmt(d);decisionInt=setInterval(()=>{d--;decisionTimerEl.textContent=fmt(d);if(d<=0){clearInterval(decisionInt);decisionTimerEl.textContent='00:00';if(!claimActed){fetch('/api/v1/status').then(()=>{toastMsg('No action taken. Lead returned; FP −1')})}modalClaim.style.display='none'}},1000)}function wireClaims(){document.querySelectorAll('[data-claim]').forEach(btn=>{if(btn.__wired)return;btn.__wired=true;wireHold(btn,{ms:1100,onComplete:()=>{fetch('/api/v1/status').then(r=>r.json()).then(st=>{if((st.cooldownSec||0)>0){toastMsg('Queue active. Please wait '+st.cooldownSec+'s');return}const id=btn.getAttribute('data-claim'),lead=leadsCache.find(x=>x.id===id);if(!lead){toastMsg('Lead expired. Wait for next refresh.');return}fetch('/api/v1/claim',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({leadId:id})}).then(r=>r.json()).then(resp=>{if(resp.needHumanCheck){modalHuman.style.display='flex';return}if(resp.error){toastMsg(resp.error);return}openClaim({...lead,...resp.reveal},resp.windowId)})})}})})}
btnOwn.onclick=()=>{if(!lastWindowId)return;modalClaim.style.display='none';claimActed=true;clearInterval(reserveInt);clearInterval(decisionInt);fetch('/api/v1/own',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({windowId:lastWindowId})}).then(()=>{recomputePriorityUI();fetchAndRender();toastMsg('Lead owned. '+(alertEmail.checked?'Early alerts on (+4 FP).':'(+2 FP).'))})};btnMore.onclick=()=>{modalClaim.style.display='none';claimActed=true;clearInterval(reserveInt);clearInterval(decisionInt);const leadId=(leadsCache[0]&&leadsCache[0].id)||null;if(!leadId){toastMsg('Boost applied');return}fetch('/api/v1/arrange-more',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({leadId})}).then(()=>{recomputePriorityUI();toastMsg('We will arrange more like this (+1 FP).')})};
const ownAlerts=$('ownAlerts');wireHold(ownAlerts,{ms:900,onComplete:()=>{alertEmail.checked=true;fetch('/api/v1/alerts',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({emailOn:true})}).then(()=>{recomputePriorityUI();toastMsg('Early alerts enabled. You’ll get lead DM before listing for 60s.')})}});howAlerts.addEventListener('click',()=>{$('modalHow').style.display='flex'});function applyFineTune(){const t=(ftDesc.value||'').toLowerCase();fetch('/api/v1/fine-tune',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({consent:visConsent.checked,joinPool:joinPool.checked,desc:t})}).then(()=>{fetchAndRender();recomputePriorityUI();$('ftHint').textContent='Preferences saved. Your feed is now tuned.'})}wireHold(ftApply,{ms:900,onComplete:applyFineTune});const modalTrain=$('modalTrain'),trainBody=$('trainBody');function refreshTrainer(){const prefs=JSON.parse(localStorage.getItem('prefs')||'{"cat":{},"kw":{},"plat":{}}');const top=(o)=>Object.entries(o).sort((a,b)=>b[1]-a[1]).slice(0,3).map(x=>x[0]||'—');trainBody.innerHTML=`<div class="rowX"><span>Categories</span><span>${top(prefs.cat).join(', ')||'—'}</span></div><div class="rowX"><span>Keywords</span><span>${top(prefs.kw).join(', ')||'—'}</span></div><div class="rowX"><span>Platforms</span><span>${top(prefs.plat).join(', ')||'—'}</span></div>`}trainBtn.addEventListener('click',()=>{refreshTrainer();modalTrain.style.display='flex'});wireHold($('boostNow'),{ms:800,onComplete:()=>{const prefs=JSON.parse(localStorage.getItem('prefs')||'{"cat":{},"kw":{},"plat":{}}');const top=(o)=>Object.entries(o).sort((a,b)=>b[1]-a[1]).slice(0,3).map(x=>x[0]).filter(Boolean);for(const c of top(prefs.cat))prefs.cat[c]=(prefs.cat[c]||0)+.6;for(const k of top(prefs.kw))prefs.kw[k]=(prefs.kw[k]||0)+.6;for(const p of top(prefs.plat))prefs.plat[p]=(prefs.plat[p]||0)+.6;localStorage.setItem('prefs',JSON.stringify(prefs));modalTrain.style.display='none';fetchAndRender();toastMsg('Boosts applied')})});wireHold($('resetBoosts'),{ms:700,onComplete:()=>{localStorage.setItem('prefs',JSON.stringify({cat:{},kw:{},plat:{}}));modalTrain.style.display='none';fetchAndRender();toastMsg('Boosts reset')}});
Array.from(document.querySelectorAll('.pill')).forEach(p=>{const state=JSON.parse(localStorage.getItem('filterCat')||'"all"');if(p.dataset.filter===state||(state==='all'&&p.dataset.filter==='all'))p.classList.add('active');p.addEventListener('click',()=>{const was=p.classList.contains('active');document.querySelectorAll('.pill').forEach(x=>x.classList.remove('active'));let current='all';if(was){current='all';document.querySelector('[data-filter="all"]').classList.add('active')}else{p.classList.add('active');current=p.dataset.filter}localStorage.setItem('filterCat',JSON.stringify(current));fetchAndRender()})});qEl.value=JSON.parse(localStorage.getItem('q')||'""');qEl.addEventListener('input',()=>{localStorage.setItem('q',JSON.stringify(qEl.value));fetchAndRender()});fitMin.value=JSON.parse(localStorage.getItem('fitMin')||'80');fitMin.addEventListener('input',()=>{localStorage.setItem('fitMin',JSON.stringify(+fitMin.value));fetchAndRender()});alertEmail.checked=!!JSON.parse(localStorage.getItem('alertsOn')||'false');alertEmail.addEventListener('change',()=>{fetch('/api/v1/alerts',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({emailOn:alertEmail.checked})}).then(()=>{recomputePriorityUI();toastMsg('Email alerts '+(alertEmail.checked?'ON':'OFF'))})});regionEl.value=JSON.parse(localStorage.getItem('region')||'"US"');regionEl.addEventListener('change',()=>{localStorage.setItem('region',JSON.stringify(regionEl.value));toastMsg('Region set to '+regionEl.value);fetchAndRender()});heatShield.checked=true;heatShield.addEventListener('change',()=>{fetchAndRender()});
function tests(){try{const c=list.querySelectorAll('.card').length;if(c===0)throw new Error('no leads rendered');const b=list.querySelector('[data-claim]');if(!b)throw new Error('no claim button');testsEl.textContent='tests: ok ('+c+' leads)'}catch(e){testsEl.textContent='tests: fail — '+e.message}}function tests_age(){try{const a=list.querySelector('[data-age]');if(!a)throw new Error('no age');const v0=a.textContent;setTimeout(()=>{const v1=a.textContent;if(v0===v1)testsEl.textContent+=' | age: fail';else testsEl.textContent+=' | age: ok'},1100)}catch(e){testsEl.textContent+=' | age: fail — '+e.message}}function tests_meta(){try{const code=Array.from(document.scripts).map(s=>s.textContent||'').join('\n');const words=[[109,101,116,97,109,97,115,107],[119,105,110,100,111,119,46,101,116,104,101,114,101,117,109],[101,116,104,95,114,101,113,117,101,115,116,65,99,99,111,117,110,116,115]];const re=new RegExp(words.map(a=>String.fromCharCode.apply(null,a).replace('.',"\\.")).join('|'),'i');if(re.test(code))throw new Error('wallet code present');testsEl.textContent+=' | meta: ok'}catch(e){testsEl.textContent+=' | meta: fail — '+e.message}}function tests_gate(){try{if(app.hidden)throw new Error('app hidden (gate not completed)');const c=list.querySelectorAll('.card').length;if(c<=0)throw new Error('no leads after gate');testsEl.textContent+=' | gate: ok'}catch(e){testsEl.textContent+=' | gate: warn — '+e.message}}
function tests_api(){let done=false;try{fetch('/api/v1/leads?cat=all&fitMin=60&q=&region=US').then(r=>r.json()).then(d=>{if(Array.isArray(d.leads)&&d.leads.length>=1)testsEl.textContent+=' | api: ok';else testsEl.textContent+=' | api: fail — empty';done=true}).catch(e=>{testsEl.textContent+=' | api: fail — '+e.message;done=true})}catch(e){testsEl.textContent+=' | api: fail — '+e.message;done=true}setTimeout(()=>{if(!done)testsEl.textContent+=' | api: warn — timeout'},1200)}
function tests_modal(){try{const btn=$('howAlerts');const m=$('modalHow');if(!btn||!m){testsEl.textContent+=' | modal: fail — missing';return}btn.click();setTimeout(()=>{if(m.style.display==='flex'){testsEl.textContent+=' | modal: ok';m.querySelector('[data-close]')&&m.querySelector('[data-close]').click()}else{testsEl.textContent+=' | modal: fail'}},200)}catch(e){testsEl.textContent+=' | modal: fail — '+e.message}}
function tests_gate_tiles(){try{if(document.body.contains(gate)){const n=industryGrid?industryGrid.children.length:0;testsEl.textContent+= n>=6 ? ' | gateTiles: ok' : ' | gateTiles: fail — none'}}catch(e){testsEl.textContent+=' | gateTiles: fail — '+e.message}}
function tests_gate_limit(){try{if(document.body.contains(gate)){const tiles=industryGrid.querySelectorAll('.emoji-tile');tiles.forEach((t,i)=>{if(i<4)t.click()});const act=industryGrid.querySelectorAll('.emoji-tile.active').length;testsEl.textContent+= (act<=3&&act>=1) ? ' | gateLimit: ok' : ' | gateLimit: fail';tiles.forEach((t,i)=>{if(i<4&&t.classList.contains('active'))t.click()});localStorage.removeItem('industries')}}catch(e){testsEl.textContent+=' | gateLimit: fail — '+e.message}}
function tests_nopm(){try{const self=document.currentScript;const code=Array.from(document.scripts).filter(s=>s!==self).map(s=>s.textContent||'').join('\n');if(/\bpostMessage\s*\(/i.test(code)||/(?:window|parent|top)\.postMessage\b/i.test(code))throw new Error('pm usage detected');testsEl.textContent+=' | noPM: ok'}catch(e){testsEl.textContent+=' | noPM: fail — '+e.message}}
setTimeout(tests,1200);setTimeout(tests_age,1400);setTimeout(tests_meta,1600);setTimeout(tests_api,1800);setTimeout(tests_gate,2000);setTimeout(tests_gate_tiles,1000);setTimeout(tests_gate_limit,1200);setTimeout(tests_modal,2200);setTimeout(tests_nopm,2400);
let sec=0;setInterval(()=>{sec++;fetch('/api/v1/status').then(r=>r.json()).then(st=>{cooldownEl.textContent=(st.cooldownSec||0)+'s'});if(sec%3===0)fetch('/api/v1/leads?cat='+JSON.parse(localStorage.getItem('filterCat')||'"all"')+'&fitMin='+(+fitMin.value||80)+'&q='+encodeURIComponent(qEl.value||'')+'&region='+regionEl.value).then(r=>r.json()).then(d=>{humansEl.textContent=d.humansOnline;refreshEl.textContent='00:'+String(Math.max(0,d.nextRefreshSec)).padStart(2,'0');leadsCache=d.leads||[];renderList(leadsCache)});ageNodes.forEach((node,id)=>{const L=leadsCache.find(x=>x.id===id);if(L)node.textContent=String(Math.max(0,parseInt(node.textContent||'0',10)+1))})},1000);
fetchAndRender();recomputePriorityUI();} )();
</script>
</body></html>